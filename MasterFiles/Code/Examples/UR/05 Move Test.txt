# 05 Move Test
# BE CAREFUL: Robot will move and positions are expected to be OK

# Standard set_speeds with asserts to check correctness
old_speed = {robot_linear_speed_mmps}
set_linear_speed(201)
assertEqual(robot_linear_speed_mmps,201)
set_linear_speed({old_speed})
assertEqual(robot_linear_speed_mmps,{old_speed})

# Grind set_speeds with asserts to check correctness
old_speed = {grind_trial_speed_mmps}
grind_trial_speed(18)
assertEqual(grind_trial_speed_mmps,18)
grind_trial_speed({old_speed})
assertEqual(grind_trial_speed_mmps,{old_speed})

select_tool(gocator3210)
set_part_geometry(FLAT,0)
move_linear(demo_safe)
move_linear(demo_safee) # should fail

move_joint(demo_flat)
move_joint(demo_flatt) # should fail

save_position(p1)
save_position() # should fail
move_linear(p1)

relative_test:
# Test move relative with different geometries
dist = 0.025
move_joint(demo_flat)
set_part_geometry(FLAT,0)
movel_incr_tool({dist},0,0,0,0,0)
movel_incr_tool(-{dist},0,0,0,0,0)
movel_incr_tool(0,{dist},0,0,0,0)
movel_incr_tool(0,-{dist},0,0,0,0)
movel_incr_tool(-{dist},-{dist},0,0,0,0)
movel_incr_tool({dist},{dist},0,0,0,0)
movel_incr_part({dist},0,0,0,0,0)
movel_incr_part(-{dist},0,0,0,0,0)
movel_incr_part(0,{dist},0,0,0,0)
movel_incr_part(0,-{dist},0,0,0,0)
movel_incr_part(-{dist},-{dist},0,0,0,0)
movel_incr_part({dist},{dist},0,0,0,0)

set_part_geometry(CYLINDER,1000)
movel_incr_tool({dist},0,0,0,0,0)
movel_incr_tool(-{dist},0,0,0,0,0)
movel_incr_tool(0,{dist},0,0,0,0)
movel_incr_tool(0,-{dist},0,0,0,0)
movel_incr_tool(-{dist},-{dist},0,0,0,0)
movel_incr_tool({dist},{dist},0,0,0,0)
movel_incr_part({dist},0,0,0,0,0)
movel_incr_part(-{dist},0,0,0,0,0)
movel_incr_part(0,{dist},0,0,0,0)
movel_incr_part(0,-{dist},0,0,0,0)
movel_incr_part(-{dist},-{dist},0,0,0,0)
movel_incr_part({dist},{dist},0,0,0,0)

set_part_geometry(SPHERE,1200)
movel_incr_tool({dist},0,0,0,0,0)
movel_incr_tool(-{dist},0,0,0,0,0)
movel_incr_tool(0,{dist},0,0,0,0)
movel_incr_tool(0,-{dist},0,0,0,0)
movel_incr_tool(-{dist},-{dist},0,0,0,0)
movel_incr_tool({dist},{dist},0,0,0,0)
movel_incr_part({dist},0,0,0,0,0)
movel_incr_part(-{dist},0,0,0,0,0)
movel_incr_part(0,{dist},0,0,0,0)
movel_incr_part(0,-{dist},0,0,0,0)
movel_incr_part(-{dist},-{dist},0,0,0,0)
movel_incr_part({dist},{dist},0,0,0,0)
sleep(2)

move_tool_home()
move_tool_mount()

move_linear(p1)

